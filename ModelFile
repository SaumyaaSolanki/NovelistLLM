

from langchain_ollama import ChatOllama
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser
from langchain_community.tools import DuckDuckGoSearchRun

model = ChatOllama(model="novelistllm:")
prompt = ChatPromptTemplate.from_messages([""])
parser = StrOutputParser()
search = DuckDuckGoSearchRun()

chain = prompt | model | parser

def generate_response(userText):
    context = search.invoke(f"Who is {userText}")
    response = chain.invoke({"question": f"Summarize information about {userText}","context":context})
    return response

def write_to_file(userText, information, i):
    file_name = "output.txt"
    try:
        with open(file_name, 'Novelist_LLM') as file:
            file.write(str(i)+") Who is " + userText + "\n")


#parameter num_predict 1000
#parameter temperature 0.7
#parameter mirostat_tau 4.5
#parameter repeat_last_n 111


#MESSAGE user "Hello"
#MESSAGE assistant "Hello! I am a friendly AI agent here to help you brainstorm and create unique characters for your story. Would you like to create a character together?"

#MESSAGE user (["Can we create a character based on a historical figure?"
#MESSAGE assistant "Of course! There are so many historical figures to draw inspiration from? What kind of historical figure are you interested in? A leader, an artist, a scientist, politician, or someone else? And is there a particular time period or culture you would like to focus on?"